# API Integration Setup\n\n## Overview\n\nThe app now supports fetching videos and live events from external APIs using the jump-key stored in Firebase for each club.\n\n## Architecture\n\n### Services\n- `ApiService`: Handles all API requests to external video platforms\n- `VideoProvider`: React context that manages video state and integrates with the API\n- `ClubService`: Updated to fetch jump-key and baseUrl from Firebase\n\n### Types\n- Extended `Club` interface with `jumpKey` and `baseUrl` fields\n- Added `Video`, `LiveEvent`, `ApiAsset`, and `ApiResponse` types\n- Updated mock data to include all required fields\n\n## Firebase Configuration\n\nEach club document in the `tenants` collection should have:\n```json\n{\n  \"name\": \"Club Name\",\n  \"jump-key\": \"M2U5MjgwQGE3OTQ4OTc5YjBkTBhZmMxMDwNnTMx\",\n  \"baseUrl\": \"https://watch.example.com/\",\n  \"icon\": \"https://example.com/logo.png\",\n  \"isActive\": true\n}\n```\n\n## API Endpoints\n\nThe integration supports these endpoints:\n\n### GET /v1/on-demand\nFetches on-demand videos with parameters:\n- `limit`: Maximum results (default: 50)\n- `after`: Pagination offset\n- `sort`: Sort field (id, title, duration)\n- `sort_type`: Sort order (asc, desc)\n- `search`: Search term\n- `tags`: Filter by tags\n- `email_address`: Filter by user ownership\n\n### GET /v1/live-events\nFetches live events with similar parameters\n\n### GET /v1/get-user\nFetches user information by email or user ID\n\n## Usage\n\n### In Components\n```typescript\nimport { useVideos } from '@/providers/VideoProvider';\n\nfunction MyComponent() {\n  const { videos, liveEvents, isLoading, error, refreshContent } = useVideos();\n  \n  // Videos are automatically loaded when clubs are selected\n  // Refresh manually if needed\n  const handleRefresh = () => {\n    refreshContent();\n  };\n  \n  return (\n    <View>\n      {videos.map(video => (\n        <VideoCard key={video.id} video={video} />\n      ))}\n    </View>\n  );\n}\n```\n\n### Search Videos\n```typescript\nconst { searchVideos } = useVideos();\n\nconst handleSearch = async (term: string) => {\n  const results = await searchVideos(term);\n  // Handle search results\n};\n```\n\n## Error Handling\n\n- If API fails, the app falls back to mock data\n- Errors are logged to console with detailed information\n- Loading states are provided for UI feedback\n- Individual club API failures don't affect other clubs\n\n## Testing\n\nTo test the API integration:\n\n1. Ensure Firebase clubs have `jump-key` and `baseUrl` configured\n2. Select clubs in the app\n3. Check console logs for API requests and responses\n4. Videos should appear in the home screen if API is working\n5. If API fails, mock data will be shown instead\n\n## Console Logging\n\nThe integration includes extensive logging:\n- ğŸŒ API requests with full URLs\n- ğŸ“‹ Request parameters\n- âœ… Successful responses with data counts\n- âŒ Error responses with details\n- ğŸ”„ Loading states and fallbacks\n\n## Performance\n\n- API requests are batched per club\n- Failed requests don't block successful ones\n- Pagination support for large datasets\n- Automatic fallback to mock data ensures app always works\n\n## Security\n\n- Jump keys are stored securely in Firebase\n- API requests use Bearer token authentication\n- No sensitive data is logged in production\n- HTTPS required for all API endpoints